(function(){var n,t;n=function(n){var t,i,r,u=this;t=$(n),r=0;t.on("click","a.close",function(n){var t;return n.preventDefault(),t=$(n.currentTarget).parent(),t.fadeOut("slow",function(){return $(this).remove()})});return i=function(n,t){var u,i;return i=$("<p>"+n+"<\/p>"),u=$("<a>Dismiss<\/a>"),u.attr({href:"#dismiss","class":"close"}),i.prepend(u),i.prop("id","msg-"+ ++r),i.addClass(t),i},{addMessage:function(n,r){var u;return u=i(n,r),u.hide(),t.prepend(u),u.fadeIn(150),u}}},t=function(n){var r,t,f,e,u,i,o,s;r=$(n),e=function(n){var t;return t=$(n),t.parents(".event").attr("data-eventid")},s=function(n){var t,i;n.preventDefault(),t=$(this),i=e(t),r.find("#e_"+i).toggleClass("hidden")},o=function(n){var t,r,f;return n.preventDefault(),t=$(this),r=t.parents(".event"),f=t.prop("href"),$.ajax({type:"POST",url:f,success:function(){i(r,!0),u(r.data("eventid")),window.HKS.Alerts.addMessage("You have been RSVP'd to this event!","confirm")}})},f=function(n){var t,r,f;return n.preventDefault(),t=$(this),r=t.parents(".event"),f=t.prop("href"),$.ajax({type:"POST",url:f,success:function(){i(r,!1),u(r.data("eventid")),window.HKS.Alerts.addMessage("Sorry you can't make it, your RSVP has been canceled.","confirm")}})},i=function(n,t){return t?(n.find("a.rsvp-button").parent().hide(),n.find("a.cancel-rsvp-button").parent().show(),n.addClass("attending")):(n.find("a.cancel-rsvp-button").parent().hide(),n.find("a.rsvp-button").parent().show(),n.removeClass("attending"))},u=function(n){if(typeof baseUrl!="undefined")return $.get(baseUrl+("/"+n),function(n){$("#attendees").html(n)})},t=r.find(".event"),t.each(function(){var n;return n=$(this),i(n,n.hasClass("attending"))});t.on("click","a.rsvp-button",o);t.on("click","a.cancel-rsvp-button",f);t.on("click",".title-link a",s)},window.HKS={Schedule:new t(".events"),Alerts:new n(".notifications")}}).call(this)